command for duplicate entry for cake session to skip in an intervall of 3 seconds for 3000 times 


for i in {1..3000} ; do mysql -e"show slave status\G" | grep -E "^.*Duplicate entry.*cake_sessions" && mysql -e "STOP SLAVE;SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;START SLAVE;
" || echo ; sleep 3 ; done


updated script 

for i in {1..3000} ; do mysql -e"show slave status\G" | grep -E "^.*Duplicate entry.*cake_sessions" && mysql -e "STOP SLAVE;SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;START SLAVE;
" || echo ; mysql -e"show slave status\G" | grep Seconds_Behind_Master ; sleep 3 ; done


updated version


while [ "$(mysql -se "SHOW SLAVE STATUS\G" | grep 'Seconds_Behind_Master:' | awk '{print $2}')" != "0" ]; do if mysql -e "SHOW SLAVE STATUS\G" | grep -q "Duplicate entry.*cake_sessions"; then  mysql -e "STOP SLAVE; SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1; START SLAVE;"; else echo ; mysql -se "SHOW SLAVE STATUS\G" | grep 'Seconds_Behind_Master:' ; fi ; sleep 3; done

  